{% extends "base.html.twig" %}

{% block title %}
Users
{% endblock %}

{% block stylesheets %}
<link rel="stylesheet" href="{{ asset('assets/css/cards.css') }}">
{% endblock %}

{% block body %}
<div class="d-flex justify-content-center align-items-center">
<h1 class="m-3"> Users List </h1>
{% if is_granted('ROLE_ADMIN') %}
    <a href="{{ path('app_register') }}"> <img src="{{ asset('assets/local-img/button/add.png') }}" width="30px" height="30px" class="img-fluid"> </a>
{% endif %} 
</div>
<div class="d-flex p-3 mt-3 justify-content-center" >
	{{ form_start(searchbarForm) }}
	<div class="input-group mb-3">
		{{ form_widget(searchbarForm.search_bar, {'attr': {'class': 'form-control', 'placeholder': 'Search'}}) }}
			<button class="btn" type="submit" id="button-addon2"> <img src="{{ asset('assets/local-img/loupe.png') }}" width="20px" height="20px"> </button>
	</div>
	{{ form_end(searchbarForm) }}
</div>

<div class="container mt-3">
	<div class="d-flex flex-wrap justify-content-center align-items-center">
	{% for user in users %}
		<a href="{{path('app_users_id', {'id': user.id})}}" class="text-decoration-none text-reset">
					<div class="mb-2 p-3 d-flex flex-column">
						<div class="card d-flex flex-column align-items-center justify-content-center">
							<div class="inner-content d-flex flex-column align-items-center justify-content-center">
								<div class="img-container rounded-circle">
									{% if user.admin == 1 %}
									<img src="{{ asset('assets/local-img/admin.png') }}"
										alt="" class="rounded-circle">
									{% else %}
									<img src="{{ asset('assets/local-img/teacher.png') }}"
										alt="" class="rounded-circle">
									{% endif %}
									
								</div>
								<div class="h3">{{ user.firstName }}
									{{ user.lastName}}</div>
								<p class="designation text-muted text-uppercase">{{ user.email }}</p>
							</div>
						</div>
						{% if is_granted('ROLE_ADMIN')%}
									<div class="text-center mt-3">
										<a href="{{ path('app_users_edit', {'id': user.id}) }}" class=""><img src="{{ asset('assets/local-img/button/edit.png') }}" width="30px" height="30px"></a>
										<a href="{{ path('app_users_delete', {'id': user.id}) }}" class=""><img src="{{ asset('assets/local-img/button/remove.png') }}" width="30px" height="30px"></a>
										<br>
										{# <a href="{{ path('app_users_login', {'id': user.id}) }}" class="btn btn-success mt-2">Connect as
										(doesnt work)</a> #}
									</div>
							{% endif %}
					</div>
								
					</a>
				{% endfor %}
			</div>
		</div>
{% endblock %}